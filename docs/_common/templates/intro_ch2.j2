AT 命令格式说明
===================

定义
---------

- **<CR>**：确认符  
- **<LF>**：换行符  
- **<..>**：参数名称，尖括号不保留在命令语句中  
- **[..]**：可选参数，方括号不保留在命令语句中  
- **（空格）**：空格符  

语法说明
--------------

**前置字符说明：**  
采用 “AT” 或 “at” 作为命令前置字符，模组仅识别该类字符串作为 AT 命令。

**命令字段：**

- **标准命令**：符合 3GPP 27007、27005 或 ITU-T Recommendation V.250 等相关标准  
- **扩展命令**：Neoway 自定义扩展语法

**连接符说明：**  
采用 “+” 与 “$” 作为前置字符与命令字段的连接符，具体详见各命令说明。

**结束符：**  
默认采用 <CR> 作为每条命令的确认符，即 **0x0D**

**命令响应语法：**

.. code-block::

   <CR><LF>response<CR><LF>

response 的内容可能是多条消息，具体取决于不同命令。

**命令结果语法：**

::

   <CR><LF>OK<CR><LF>
   <CR><LF>ERROR<CR><LF>

其中 **OK** 表示执行成功，**ERROR** 表示执行失败。


命令类型
--------------

.. csv-table::
   :header: "命令类型", "命令语法", "响应语法", "功能说明"
   :widths: 20, 25, 25, 30

   "设置命令", "AT+CMD=<VALUE><CR>", "OK 或 ERROR", "写入参数"
   "执行命令", "AT+CMD[=<VALUE>]<CR>", "response + OK", "执行内部动作"
   "测试命令", "AT+CMD=?<CR>", "response + OK", "返回可选参数列表"
   "查询命令", "AT+CMD?<CR>", "response + OK", "返回当前参数值"
   "主动上报", "<CR><LF>+CMD:<VALUE><CR><LF>", "N/A", "模组状态上报"


命令响应时间
-------------------

有方模组在接收到每条命令后，需要一定时间进行内部处理，其响应时长取决于命令类型。  
对于主要涉及参数设置或读写的命令，模组一般会立即响应，默认最大响应时长约为 **300ms**。

若命令涉及 SIM/USIM 卡操作、网络交互或外设控制，则可能需要数秒至数十秒才能完成响应。实际时长取决于：

- SIM/USIM 卡内部数据（例如电话簿、短信数量）
- 网络环境质量与负载情况
- 外设设备类型与工作状态


{% if timeout_rows %}

下表列出部分常见命令的典型响应时间。未列出的命令通常最大响应时间约为 **300ms**。

.. list-table::
   :header-rows: 1
   :widths: 15 45 20
   :align: center

   * - {{ labels.timeout_no if labels.timeout_no else "No." }}
     - {{ labels.timeout_cmd if labels.timeout_cmd else "命令" }}
     - {{ labels.timeout_value if labels.timeout_value else "超时时间（单位：s）" }}

{% for row in timeout_rows %}
   * - {{ row.no }}
     - {{ row.cmd }}
     - {{ row.timeout }}
{% endfor %}
{% endif %}
