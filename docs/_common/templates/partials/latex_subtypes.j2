{% macro render(subtypes, labels) %}
{% set label_map = {
    "执行": "执行命令",
    "查询": "查询命令",
    "测试": "测试命令",
    "设置": "设置命令",
    "Execute": "Execute Command",
    "Query": "Query Command",
    "Test": "Test Command",
    "Set": "Set Command",
} %}

{% for st in subtypes %}
{% set label = label_map.get(st.type, labels.cmd or "命令") %}

\atexecutetitle
\atsubtitle{ {{ label }} }
\atcommand{ {{ st.fmt|trim }} }

{% if st.response.strip() %}
\atresponse{ {{ st.response|replace('\n', '\\\\') }} }
{% else %}
\atresponse{ OK }
{% endif %}

{% endfor %}
{% endmacro %}
